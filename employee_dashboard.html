<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Employee Dashboard - SkillSync</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="css/styles.css">
</head>
<body>
  <nav class="navbar navbar-expand-lg navbar-light fixed-top">
    <div class="container-fluid">
      <a class="navbar-brand" href="index.html">SkillSync</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ms-auto">
          <li class="nav-item">
            <a class="nav-link" href="index.html">Home</a>
          </li>
          <li class="nav-item">
            <a class="nav-link active" href="#">Job Listings</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">Profile</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="index.html">Logout</a>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <div class="container mt-5 pt-5">
    <div class="search-bar">
      <div class="input-group">
        <span class="input-group-text"><i class="fas fa-search"></i></span>
        <input type="text" class="form-control" placeholder="Search for jobs..." id="searchInput">
      </div>
    </div>
    <div class="row">
      <div class="col-md-3 mb-3">
        <button class="btn btn-secondary w-100 d-md-none" type="button" data-bs-toggle="collapse" data-bs-target="#filterSidebar" aria-expanded="false" aria-controls="filterSidebar">
          <i class="fas fa-filter"></i> Filters
        </button>
        <div class="collapse d-md-block filter-sidebar" id="filterSidebar">
          <h5>Filters</h5>
          <div class="mb-3">
            <label for="locationFilter" class="form-label">Location</label>
            <select class="form-select" id="locationFilter">
              <option value="">All Locations</option>
              <option value="San Francisco">San Francisco</option>
              <option value="New York">New York</option>
              <option value="Remote">Remote</option>
            </select>
          </div>
          <div class="mb-3">
            <label for="jobTypeFilter" class="form-label">Job Type</label>
            <select class="form-select" id="jobTypeFilter">
              <option value="">All Types</option>
              <option value="Full-Time">Full-Time</option>
              <option value="Part-Time">Part-Time</option>
              <option value="Contract">Contract</option>
              <option value="Internship">Internship</option>
            </select>
          </div>
        </div>
      </div>
      <div class="col-md-9">
        <h2 class="text-center mb-3"><i class="fas fa-briefcase"></i> Available Jobs</h2>
        <div id="jobList" class="row row-cols-1 row-cols-md-2 g-3">
          <!-- Jobs will be listed here -->
        </div>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    function filterJobs() {
      const searchTerm = document.getElementById('searchInput').value.toLowerCase();
      const location = document.getElementById('locationFilter').value;
      const jobType = document.getElementById('jobTypeFilter').value;
      const jobs = JSON.parse(localStorage.getItem('jobs')) || [];
      let filteredJobs = jobs;

      if (searchTerm) {
        filteredJobs = filteredJobs.filter(job => 
          job.title.toLowerCase().includes(searchTerm) || 
          job.company.toLowerCase().includes(searchTerm) ||
          (job.location && job.location.toLowerCase().includes(searchTerm))
        );
      }

      if (location) {
        filteredJobs = filteredJobs.filter(job => job.location === location);
      }

      if (jobType) {
        filteredJobs = filteredJobs.filter(job => job.jobType === jobType);
      }

      const jobList = document.getElementById('jobList');
      jobList.innerHTML = '';
      if (filteredJobs.length === 0) {
        jobList.innerHTML = '<p class="text-center">No jobs match your filters.</p>';
      } else {
        filteredJobs.forEach(job => {
          const jobCol = document.createElement('div');
          jobCol.className = 'col';
          jobCol.innerHTML = `
            <div class="card h-auto job-card">
              <div class="card-body">
                <h5 class="card-title job-title"><i class="fas fa-briefcase"></i> ${job.title || 'Untitled Job'}</h5>
                <h6 class="card-subtitle mb-2 text-muted job-company">${job.company || 'Unknown Company'}</h6>
                <p class="job-location"><i class="fas fa-map-pin"></i> ${job.location || 'Remote'}</p>
                <p class="job-type"><i class="fas fa-clock"></i> ${job.jobType || 'Not Specified'}</p>
                <p class="card-text">${job.description || 'No description available'}</p>
                <a href="apply_job.html?jobId=${job.id}" class="btn btn-apply">Apply Now</a>
              </div>
            </div>
          `;
          jobList.appendChild(jobCol);
        });
      }
    }

    document.getElementById('searchInput').addEventListener('input', filterJobs);
    document.getElementById('locationFilter').addEventListener('change', filterJobs);
    document.getElementById('jobTypeFilter').addEventListener('change', filterJobs);

    // Initial display
    filterJobs();
  </script>
</body>
</html>